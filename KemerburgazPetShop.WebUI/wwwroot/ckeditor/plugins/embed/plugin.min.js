CKEDITOR.plugins.add("embed",{icons:"embed",hidpi:!0,requires:"embedbase",init:function(n){var e=CKEDITOR.plugins.embedBase.createWidgetBaseDefinition(n),t=e.init;n.config.embed_provider||CKEDITOR.error("embed-no-provider-url"),CKEDITOR.tools.extend(e,{dialog:"embedBase",button:n.lang.embedbase.button,allowedContent:"div[!data-oembed-url]",requiredContent:"div[data-oembed-url]",providerUrl:new CKEDITOR.template(n.config.embed_provider||""),styleToAllowedContentRules:function(e){return{div:{propertiesOnly:!0,classes:e.getClassesArray(),attributes:"!data-oembed-url"}}},init:function(){t.call(this),n.config.embed_keepOriginalContent||this.on("ready",function(){this.loadContent(this.data.url,{callback:function(){n.fire("updateSnapshot")}})})},upcast:function(e,t){var i;if("div"==e.name&&e.attributes["data-oembed-url"]){if(t.url=e.attributes["data-oembed-url"],!n.config.embed_keepOriginalContent)for(;i=e.getFirst();)i.remove();return!0}},downcast:function(e){e.attributes["data-oembed-url"]=this.data.url}},!0),n.widgets.add("embed",e),n.config.embed_keepOriginalContent&&n.filter.addElementCallback(function(e){if("data-oembed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE})}}),CKEDITOR.config.embed_keepOriginalContent=!1;